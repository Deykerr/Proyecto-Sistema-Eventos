<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Gestión de Mis Eventos</h2>
    <button class="btn btn-success" routerLink="/events/create">
      <i class="bi bi-plus-lg"></i> Nuevo Evento
    </button>
  </div>

  <div *ngIf="isLoading" class="text-center py-5">
    <div class="spinner-border text-primary" role="status"></div>
  </div>

  <div *ngIf="!isLoading && events.length === 0" class="alert alert-info text-center">
    Aún no has creado eventos.
  </div>

  <div class="table-responsive shadow-sm" *ngIf="!isLoading && events.length > 0">
    <table class="table table-hover align-middle mb-0">
      <thead class="table-light">
        <tr>
          <th>Evento</th>
          <th>Estado</th>
          <th>Fecha</th>
          <th>Reservas/Capacidad</th>
          <th class="text-end">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let event of events">
          <td>
            <div class="fw-bold">{{ event.title }}</div>
            <div class="small text-muted">{{ event.categoryName }}</div>
          </td>
          <td>
            <span class="badge" 
                  [ngClass]="{
                    'bg-warning text-dark': event.status === 'Draft',
                    'bg-success': event.status === 'Published',
                    'bg-danger': event.status === 'Canceled'
                  }">
              {{ event.status === 'Draft' ? 'Borrador' : (event.status === 'Published' ? 'Publicado' : 'Cancelado') }}
            </span>
          </td>
          <td>{{ event.startDate | date:'shortDate' }}</td>
          <td>
            {{ event.capacity - event.availableSlots }} / {{ event.capacity }}
          </td>
          <td class="text-end">
            <a [routerLink]="['/events', event.id]" class="btn btn-sm btn-outline-primary me-2" title="Ver Detalle / Publicar">
              <i class="bi bi-eye"></i>
            </a>
            
            <a [routerLink]="['/events/edit', event.id]" class="btn btn-sm btn-outline-secondary me-2" title="Editar">
              <i class="bi bi-pencil"></i>
            </a>

            <button class="btn btn-sm btn-outline-danger" (click)="deleteEvent(event.id, event.title)" title="Eliminar">
              <i class="bi bi-trash"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>